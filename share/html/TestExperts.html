<!DOCTYPE html>
<html>
<!-- This file is automatically generated: do not edit. -->
<head>
<title>Test Experts</title>
<meta charset="utf-8">
</head>
<body>
<!-- <h1>Test Experts</h1> -->
<h2>Test Expert</h2>

<p>There is a test expert advisor in<br />
<a href="OTPyTestPikaEA.mq4">https://github.com/OpenTrading/OTMql4AMQP/raw/master/MQL4/Experts/OTMql4/OTPyTestPikaEA.mq4</a></p>

<p>Attach the EA to a chart when you have a RabbitMQServer running.<br />
Then you open a command window and go to your <img src="{MQL4\Python" title="{MQL4\Python" alt="{MQL4\Python" /> directory and<br />
run the following command to see the messages the expert is broadcasting:</p>
<pre>
python OTMql427/PikaListener.py "#"
</pre>

<p>You can select which RabbitMQ messages you want to subscribe to from<br />
one or more of: <tt>ticks bars timer retval</tt></p>

<p>To see just ticks, do</p>
<pre>
python OTMql427/PikaListener.py "tick.#"
</pre>
<p>To see timer events and ticks, do</p>
<pre>
python OTMql427/PikaListener.py "tick.#" "timer.#"
</pre>

<p>Read the <a href="RabbitMQ">http://www.rabbitmq.org</a> documentation for further<br />
details of using <tt>#</tt> and <tt>*</tt><br />
to select the messages you are interested in; you can select by<br />
type of message, the currency pair, period, the hex value of the <tt>ChartID</tt>.</p>

<p>The interval for timer events can be set when you attach the expert:<br />
{{{<br />
extern int iTIMER_INTERVAL_SEC = 10;<br />
}}</p>

<p>The information that is put on a tick is supplied by the function<br />
<tt>sBarInfo</tt> which puts together the information you want send<br />
to a remote client on every bar. Change it to suit your own needs.</p>

<p>You can have many experts running on many charts. There is only one<br />
<tt>Pika.connection.Connection</tt> object, and it is shared by all charts.<br />
The total number of charts using the connection is kept in the global variable<br />
<tt>fPY_PIKA_CONNECTION_USERS</tt>. When the last expert is removed, this<br />
number drops to 0, and the Connection is shut down.</p>

<p>You should always remove any <tt>OTMql4Py</tt> experts before you shut down Mt4.<br />
It may not initialize properly if you start Mt4 with an <tt>OTMql4Py</tt><br />
expert already attached. You may have to remove the expert and restart<br />
Mt4 if it does not initialize properly.</p>

<p>Specifically, if you load an <tt>OTMql4Py</tt> expert and the Mt4 log shows<br />
a message about <tt>exceptions.SystemError</tt>, it means that the Python<br />
DLL did not load properly, and you <strong>must</strong> restart if you want to use<br />
an <tt>OTMql4Py</tt> expert. You should get a pop-up Alert from Mt4 to alert<br />
you of this.</p>

<h3>Installation</h3>

<p>For the moment there is no installer: just <tt>git clone</tt> or download the<br />
zip from github.com and unzip into an empty directory. Then recursively copy<br />
the folder MQL4 over the MQL4 folder of your Metatrader installation. It will<br />
not overwrite any Mt4 system files; if it overwrites any OTMql4Py files,<br />
the files are in fact identical (e.g. <tt>__init__.py</tt>). See<br />
<a href="Installation">https://github.com/OpenTrading/OpenTrader/wiki/Installation</a> .</p></body>
</html>
